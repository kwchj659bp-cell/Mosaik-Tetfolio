<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Vielfalt-Mosaik (interaktiv)</title>
  <style>
    :root { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { margin: 0; padding: 14px; background: #fff; color: #111; }

    .wrap {
      display: grid;
      grid-template-columns: 220px 1fr;
      gap: 14px;
      align-items: start;
      max-width: 1200px;
      margin: 0 auto;
    }

    .panel, .canvasBox {
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      padding: 12px;
      background: #fff;
    }

    .palette { display: grid; gap: 12px; }

    .swatch {
      display: flex; align-items: center; gap: 12px;
      padding: 12px;
      border: 3px solid #e5e7eb;
      border-radius: 18px;
      cursor: pointer;
      user-select: none;
      font-size: 1.05rem;
    }
    .swatch.active { border-color: #111; }

    .chip {
      width: 52px; height: 52px;
      border-radius: 16px;
      border: 2px solid rgba(0,0,0,.2);
    }

    .current {
      display: flex; align-items: center; gap: 10px;
      margin: 14px 0 0;
      font-size: 1rem;
    }
    .current .chip { width: 26px; height: 26px; border-radius: 8px; }

    .tools { display: grid; gap: 10px; margin-top: 16px; }
    button {
      border: 0; border-radius: 16px;
      padding: 12px 12px;
      cursor: pointer;
      font-size: 1rem;
      background: #4b5563;
      color: #fff;
    }

    .hint {
      margin-top: 12px;
      font-size: 0.95rem;
      color: #374151;
      line-height: 1.35;
    }

    svg { width: 100%; height: auto; display: block; }

    .tile { cursor: pointer; pointer-events: all; }
    .tile:hover { opacity: 0.92; }

    .b { stroke: #000; stroke-width: 12; vector-effect: non-scaling-stroke; }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="panel">
      <div class="palette">
        <div class="swatch active" id="swatchBlue" onclick="setColor('#1F4AA8','swatchBlue')">
          <div class="chip" style="background:#1F4AA8"></div> Blau
        </div>
        <div class="swatch" id="swatchRed" onclick="setColor('#E53935','swatchRed')">
          <div class="chip" style="background:#E53935"></div> Rot
        </div>
        <div class="swatch" id="swatchYellow" onclick="setColor('#FFEB3B','swatchYellow')">
          <div class="chip" style="background:#FFEB3B"></div> Gelb
        </div>
        <div class="swatch" id="swatchBlack" onclick="setColor('#000000','swatchBlack')">
          <div class="chip" style="background:#000000"></div> Schwarz
        </div>
        <div class="swatch" id="swatchWhite" onclick="setColor('#FFFFFF','swatchWhite')">
          <div class="chip" style="background:#FFFFFF"></div> Weiß (Radierer)
        </div>
      </div>

      <div class="current">
        <div class="chip" id="currentChip" style="background:#1F4AA8"></div>
        <div>Aktuelle Farbe</div>
      </div>

      <div class="tools">
        <button onclick="resetAll()">Zurücksetzen</button>
      </div>

      <div class="hint">
        1) Farbe wählen<br>
        2) Kästchen anklicken<br>
        Löschen: <b>Alt + Klick</b>, <b>Rechtsklick</b> oder <b>Doppelklick</b> (Touch)
      </div>
    </div>

    <div class="canvasBox">
      <svg id="mosaic" viewBox="0 0 1200 650" xmlns="http://www.w3.org/2000/svg" aria-label="Mosaik">
        <rect x="20" y="20" width="1160" height="610" fill="none" class="b"></rect>

        <!-- Kästchen -->
        <rect class="tile b" style="fill:#fff" x="20" y="20" width="130" height="150"></rect>
        <rect class="tile b" style="fill:#fff" x="20" y="170" width="130" height="50"></rect>
        <rect class="tile b" style="fill:#fff" x="20" y="220" width="130" height="90"></rect>

        <rect class="tile b" style="fill:#fff" x="150" y="20" width="420" height="70"></rect>
        <rect class="tile b" style="fill:#fff" x="570" y="20" width="280" height="70"></rect>
        <rect class="tile b" style="fill:#fff" x="850" y="20" width="330" height="170"></rect>

        <rect class="tile b" style="fill:#fff" x="150" y="90" width="280" height="220"></rect>
        <rect class="tile b" style="fill:#fff" x="430" y="90" width="420" height="340"></rect>

        <rect class="tile b" style="fill:#fff" x="20" y="310" width="410" height="90"></rect>
        <rect class="tile b" style="fill:#fff" x="20" y="400" width="410" height="170"></rect>

        <rect class="tile b" style="fill:#fff" x="430" y="430" width="300" height="100"></rect>
        <rect class="tile b" style="fill:#fff" x="730" y="430" width="120" height="200"></rect>

        <rect class="tile b" style="fill:#fff" x="850" y="190" width="230" height="120"></rect>
        <rect class="tile b" style="fill:#fff" x="1080" y="190" width="100" height="120"></rect>

        <rect class="tile b" style="fill:#fff" x="850" y="310" width="170" height="150"></rect>
        <rect class="tile b" style="fill:#fff" x="1020" y="310" width="160" height="150"></rect>

        <rect class="tile b" style="fill:#fff" x="850" y="460" width="170" height="70"></rect>
        <rect class="tile b" style="fill:#fff" x="1020" y="460" width="160" height="70"></rect>

        <rect class="tile b" style="fill:#fff" x="850" y="530" width="330" height="100"></rect>

        <rect class="tile b" style="fill:#fff" x="20" y="570" width="90" height="60"></rect>
        <rect class="tile b" style="fill:#fff" x="110" y="570" width="180" height="60"></rect>
        <rect class="tile b" style="fill:#fff" x="290" y="570" width="140" height="60"></rect>
      </svg>
    </div>
  </div>

  <script>
    let selectedColor = "#1F4AA8";

    function setColor(color, swatchId) {
      selectedColor = color;

      document.querySelectorAll(".swatch").forEach(s => s.classList.remove("active"));
      const active = document.getElementById(swatchId);
      if (active) active.classList.add("active");

      const chip = document.getElementById("currentChip");
      if (chip) chip.style.background = color;
    }

    function paint(el, color) { el.style.fill = color; }

    function resetAll() {
      document.querySelectorAll(".tile").forEach(t => paint(t, "#FFFFFF"));
    }

    function attachMosaicHandlers() {
      const svg = document.getElementById("mosaic");
      if (!svg || svg.dataset.bound === "1") return;
      svg.dataset.bound = "1";

      svg.addEventListener("click", (e) => {
        const t = e.target;
        if (!t?.classList?.contains("tile")) return;
        paint(t, e.altKey ? "#FFFFFF" : selectedColor);
      });

      svg.addEventListener("contextmenu", (e) => {
        const t = e.target;
        if (!t?.classList?.contains("tile")) return;
        e.preventDefault();
        paint(t, "#FFFFFF");
      });

      svg.addEventListener("dblclick", (e) => {
        const t = e.target;
        if (!t?.classList?.contains("tile")) return;
        paint(t, "#FFFFFF");
      });
    }

    document.addEventListener("DOMContentLoaded", attachMosaicHandlers);
    window.addEventListener("load", attachMosaicHandlers);
    setTimeout(attachMosaicHandlers, 300);
    setTimeout(attachMosaicHandlers, 1200);
  </script>
</body>
</html>
